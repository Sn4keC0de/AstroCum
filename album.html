<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/album.css">
    <title>Document</title>
</head>
<body>
    <div id="libro">
        <button class="pageBtm" id="prev-page">‚óÄ</button>
      
        <div id="doble-pagina">
          <div class="pagina izquierda" id="pagina-izquierda"></div>
          <div class="pagina derecha" id="pagina-derecha"></div>
        </div>
      
        <button class="pageBtm" id="next-page">‚ñ∂</button>
      </div>
      
      <!-- Modal para imagen expandida y 3D -->
      <div id="modal" class="oculto">
        <div class="tarjeta-3d" id="tarjeta">
          <div class="cara frontal">
            <img id="imagen-expandida" src="" alt="Imagen ampliada" />
          </div>
          <div class="cara trasera">
            <p id="mensaje-detras">Mensaje secreto</p>
            <a href="./img/polaroidTest2.png" download>
              <button>Descargar Dibujito</button>
            </a>
          </div>
        </div>
      </div>
</body>
</html>

<script>
    const paginas = [
    [ // P√°gina par: izquierda (0) y derecha (1)
      { src: "./img/polaroidTest.png", mensaje: "Ya un a√±o mas viejo, no lo puedo creer. Astrito, me pone muy feliz el poder compartir este d√≠a tan especial con alguien tan incre√≠ble como lo sos vos. Una de mis mas grandes inspiraciones y uno de mis mas cercanos amigos. Vivimos tantos momentos ic√≥nicos como el de cantar canciones de viejas dolidas hasta tarde en vc, hasta el poder contarnos las cosas que nos preocupaban o hac√≠an sentir mal, sin contar much√≠simas lindas experiencias mas. Sos incre√≠ble Astro, tenes una vibra tan brillante que tu presencia es muy notable. Espero que podamos seguir caminando por el mismo camino muuuchos a√±os m√°s, crear muchos recuerdos y siempre contar con el apoyo del otro. Feliz cumple chinchulin, mereces el mejor de los dias ‚ú®", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest2.png", mensaje: "No hace falta tener mil recuerdos ic√≥nicos para saber lo importante que eres para m√≠. A veces, el simple hecho de que una persona est√©, de que exista y siga adelante, es suficiente para ocupar un lugar enorme en el coraz√≥n. Aunque no hablemos todo el tiempo, eres uno de esos pilares silenciosos que habitan en mi corazoncito, y te aprecio m√°s de lo que quiz√°s imaginas. Te admiro mucho,por lo que eres, por todo lo que cargas, y a√∫n as√≠ decides seguir caminando. Astrito, gracias por ser t√∫ y por ser parte de esos d√∫os de personajes en los musicales y jueguitos que tanto amamos. JAJAJA  Feliz cumplea√±os! ü©∑ que la vida te devuelva un poquito de todo lo bueno que das.", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest3.png", mensaje: "¬øPuedes creer que nos conocimos en un elenco que result√≥ ser un desastre? Me alegra que haya sido as√≠. Hemos compartido momentos incre√≠bles y me has ense√±ado tanto con la bondad qu√© posees, pero m√°s que todo, un par de palabras m√°gicas resuenan en mi mente a√∫n a d√≠a de hoy: ‚ÄúCOLALE, MUEVE TU COLALE‚Äù.", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest4.png", mensaje: "El d√≠a m√°s hermoso que he tenido fue cuando te conoc√≠, llenaste mi vida de luz y color. Tengo muchos recuerdos preciosos contigo, pero el m√°s precioso fue cuando conectamos desde el primer d√≠a sin saber que esa noche te convertir√≠as en una persona tan especial en mi vida. Suena cursi, pero nunca pens√© que te ibas a volver tan importante para m√≠. Entraste a mi coraz√≥n sin previo aviso y te instalaste; eres alguien tan fundamental en mi vida que me alegro de que seas parte de ella. Sin importar cu√°ntas cosas hemos pasado, seguimos estando juntos recorriendo el mismo camino. Espero que en un futuro sigamos siendo una amistad tan linda tanto en las buenas como en las malas. Te quiero mucho, atritobomnito. ¬°Besotes al cumplea√±ero! FELIZ CUMPLEA√ëOS CORAZ√ìN!!! üéâ", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest5.png", mensaje: "Al igual que las estrellas fugaces, apareciste de la nada, con un brillo destellante y acogedor, pero no para cumplir los deseos de nadie. Sino brillar, estar, acompa√±ar, querer, incluso en algunas ocasiones, amar. El mundo es cruel con aquel que porta la antorcha de la bondad, de la alegr√≠a. Pero a√∫n as√≠ decides cargarlo y cada d√≠a, ser una mejor persona, ser alguien con qui√©n contar. Alguien que sus palabras se convierten en abrazos al alma, caricias al coraz√≥n. Una persona extraordinaria, so√±adora, particular. \nTodo el mundo tiene su propia belleza. Pero a√∫n as√≠, son aquellas cosas que no buscan atenci√≥n, las m√°s preciosas. Tu amistad fue un regalo para m√≠ ser, y estoy feliz de poder verte crecer, con todo el peso de la vida en tu espalda, levant√°ndote cada d√≠a para enfrentar el d√≠a. No hay nada m√°s valiente que estar ah√≠. \nMi momento m√°s preciado, de todos los que tenemos, fue en el que est√°bamos estudiando la primera vez. No hab√≠a abierto un libro de filosof√≠a hace como 8 a√±os, y ni siquiera entend√≠ la mitad de las cosas que estaba leyendo. Pero empezamos a charlar, nos contamos bastantes cosas, me sent√≠ muy feliz al respecto. Me sent√≠ querido. Es como si todo aquello que me afectaba, se hubiera parado durante un ratito. Me quise quedar, porque as√≠ de especial es tu presencia en la vida de la gente. Hiciste que esa actividad, que para m√≠ era tan dif√≠cil, fuera de lo m√°s especial que vivimos juntos. \nTe deseo todo lo bueno en √©ste mundo y m√°s. Que todo lo que quieras, se te de. Pero s√© que cumplir√°s todo lo que quieras. Te adoro, feliz cumplea√±os Stella.", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest.png", mensaje: "Mensaje de img 1", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 }
    ],
    [ // P√°gina par siguiente
      { src: "./img/polaroidTest.png", mensaje: "Mensaje de img 1", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest.png", mensaje: "Mensaje de img 1", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest.png", mensaje: "Mensaje de img 1", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest.png", mensaje: "Mensaje de img 1", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest.png", mensaje: "Mensaje de img 1", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 },
      { src: "./img/polaroidTest.png", mensaje: "Mensaje de img 1", x: (Math.random() - 0.5) * 20, y: (Math.random() - 0.5) * 20, r: (Math.random() - 0.5) * 20 }
    ]
  ];

  let paginaActual = 0;

  const izquierda = document.getElementById("pagina-izquierda");
  const derecha = document.getElementById("pagina-derecha");
  const modal = document.getElementById("modal");
  const imagenExpandida = document.getElementById("imagen-expandida");
  const mensajeDetras = document.getElementById("mensaje-detras");
  const tarjeta = document.getElementById("tarjeta");

  function cargarDoblePagina(index) {
    izquierda.innerHTML = "";
    derecha.innerHTML = "";
    const pagina = paginas[index];

    if (!pagina) return;

    pagina.slice(0, 3).forEach((item) => {
      const img = document.createElement("img");
      img.classList.add("foto");
      img.src = item.src;
      img.setAttribute("x", item.x);
      img.setAttribute("y", item.y);
      img.setAttribute("r", item.r);
      img.addEventListener("click", () => abrirImagen(item));
      izquierda.appendChild(img);
    });
    
    pagina.slice(3, 6).forEach((item) => {
      const img = document.createElement("img");
      img.classList.add("foto");
      img.src = item.src;
      img.setAttribute("x", item.x);
      img.setAttribute("y", item.y);
      img.setAttribute("r", item.r);
      img.addEventListener("click", () => abrirImagen(item));
      derecha.appendChild(img);
    });

    posicionarFotosAleatorias(izquierda);
    posicionarFotosAleatorias(derecha);
  }

  function abrirImagen(item) {
    imagenExpandida.src = item.src;
    mensajeDetras.textContent = item.mensaje;
    tarjeta.classList.remove("rotado");
    modal.classList.remove("oculto");
  }

  tarjeta.addEventListener("click", () => {
    tarjeta.classList.toggle("rotado");
  });

  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      modal.classList.add("oculto");
    }
  });

  document.getElementById("next-page").addEventListener("click", () => {
    if (paginaActual < paginas.length - 1) {
      paginaActual++;
      cargarDoblePagina(paginaActual);
    }
  });

  document.getElementById("prev-page").addEventListener("click", () => {
    if (paginaActual > 0) {
      paginaActual--;
      cargarDoblePagina(paginaActual);
    }
  });

  // Cargar la primera doble p√°gina
  cargarDoblePagina(paginaActual);






  

  function posicionarFotosAleatorias(paginaElement) {
    const fotos = paginaElement.querySelectorAll('.foto');
    
    fotos.forEach((foto, index) => {
      // Posiciones base (puedes cambiarlas seg√∫n tu dise√±o)
      const posiciones = [
        { top: '8%', left: '10%' },
        { top: '36%', left: '55%' },
        { top: '65%', left: '15%' },
      ];

      const base = posiciones[index];

      // Variaciones aleatorias
      /* const rotacion = (Math.random() - 0.5) * 20;
      const desplazamientoX = (Math.random() - 0.5) * 20;
      const desplazamientoY = (Math.random() - 0.5) * 20; */

      foto.style.top = `calc(${base.top} + ${foto.getAttribute("y")}px)`;
      foto.style.left = `calc(${base.left} + ${foto.getAttribute("x")}px)`;
      foto.style.transform = `rotate(${foto.getAttribute("r")}deg)`;
    });
  }

  posicionarFotosAleatorias(izquierda);
  posicionarFotosAleatorias(derecha);
</script>